# Admin 관리자 페이지 생성

@jiny/admin 패키지는 Laravel 기반의 관리자 페이지를 쉽게 생성할 수 있는 강력한 도구를 제공합니다.

## 주요 명령어

### 1. admin:make - 통합 생성 명령어

관리자 CRUD 모듈을 생성하는 핵심 명령어입니다. 개별 컴포넌트를 선택적으로 생성할 수 있습니다.

```bash
php artisan admin:make {module} {feature} [options]
```

#### 옵션

개별 컴포넌트 생성:
- `--controller` : 컨트롤러만 생성 (5개 컨트롤러 + JSON 설정)
- `--json` : JSON 설정 파일만 생성
- `--view` : 뷰 파일만 생성 (5개 뷰)
- `--model` : 모델만 생성
- `--migrate` : 마이그레이션만 생성 (생성 후 자동 실행)
- `--route` : 라우트만 등록
- `--seed` : 시더만 생성 (생성 후 자동 실행)
- `--factory` : 팩토리만 생성
- `--all` : 모든 구성요소 생성 (기본값)
- `--force` : 기존 파일 덮어쓰기

#### 사용 예제

```bash
# 모든 구성요소 생성 (기본)
php artisan admin:make shop product

# 컨트롤러와 JSON만 생성
php artisan admin:make shop product --controller

# 뷰만 생성
php artisan admin:make shop product --view

# 모델과 마이그레이션만 생성
php artisan admin:make shop product --model --migrate

# 여러 컴포넌트 동시 생성
php artisan admin:make shop product --controller --view --route

# 모든 구성요소 + 시더, 팩토리 포함
php artisan admin:make shop product --all --seed --factory

# 기존 파일 덮어쓰기
php artisan admin:make shop product --controller --force
```

### 2. admin:make-json - JSON 설정 파일 생성

JSON 설정 파일만 개별적으로 생성합니다.

```bash
php artisan admin:make-json {module} {controller} [--force]
```

예제:
```bash
php artisan admin:make-json shop product
```

생성 파일:
- `jiny/{Module}/App/Http/Controllers/Admin/Admin{Controller}/Admin{Controller}.json`

### 3. admin:make-controller - 컨트롤러 생성

5개의 SAC(Single Action Controller) 패턴 컨트롤러를 생성합니다.

```bash
php artisan admin:make-controller {module} {controller} [--force]
```

예제:
```bash
php artisan admin:make-controller shop product
```

생성되는 컨트롤러:
- `Admin{Controller}.php` - 목록 페이지
- `Admin{Controller}Create.php` - 생성 페이지
- `Admin{Controller}Edit.php` - 수정 페이지
- `Admin{Controller}Delete.php` - 삭제 처리
- `Admin{Controller}Show.php` - 상세 보기

### 4. admin:make-view - 뷰 템플릿 생성

Blade 뷰 템플릿 파일을 생성합니다.

```bash
php artisan admin:make-view {module} {controller} [--force]
```

예제:
```bash
php artisan admin:make-view shop product
```

생성되는 뷰:
- `table.blade.php` - 목록 테이블
- `create.blade.php` - 생성 폼
- `edit.blade.php` - 수정 폼
- `show.blade.php` - 상세 보기
- `search.blade.php` - 검색 폼

## 생성되는 파일 구조

```
jiny/{Module}/
├── App/
│   ├── Http/
│   │   └── Controllers/
│   │       └── Admin/
│   │           └── Admin{Feature}/
│   │               ├── Admin{Feature}.php
│   │               ├── Admin{Feature}Create.php
│   │               ├── Admin{Feature}Edit.php
│   │               ├── Admin{Feature}Delete.php
│   │               ├── Admin{Feature}Show.php
│   │               └── Admin{Feature}.json
│   └── Models/
│       └── Admin{Feature}.php
├── database/
│   └── migrations/
│       └── {timestamp}_create_admin_{features}_table.php
├── resources/
│   └── views/
│       └── admin/
│           └── admin_{feature}/
│               ├── table.blade.php
│               ├── create.blade.php
│               ├── edit.blade.php
│               ├── show.blade.php
│               └── search.blade.php
└── routes/
    └── admin.php
```

## 워크플로우 예제

### 새로운 관리자 모듈 생성

1. 전체 CRUD 모듈 생성:
```bash
php artisan admin:make shop product --all
```

2. 단계별 생성:
```bash
# 1단계: 모델과 마이그레이션 생성
php artisan admin:make shop product --model --migrate

# 2단계: 컨트롤러 생성
php artisan admin:make shop product --controller

# 3단계: 뷰 생성  
php artisan admin:make shop product --view

# 4단계: 라우트 등록
php artisan admin:make shop product --route
```

3. 기존 모듈 업데이트:
```bash
# 뷰만 재생성
php artisan admin:make shop product --view --force

# JSON 설정만 업데이트
php artisan admin:make-json shop product --force
```

## Hook 시스템

생성된 컨트롤러는 Hook 메서드를 통해 커스터마이징이 가능합니다:

- `hookIndexing()` - 목록 조회 전
- `hookIndexed()` - 목록 조회 후
- `hookCreating()` - 생성 폼 표시 전
- `hookStoring()` - 데이터 저장 전
- `hookStored()` - 데이터 저장 후
- `hookEditing()` - 수정 폼 표시 전
- `hookUpdating()` - 데이터 업데이트 전
- `hookUpdated()` - 데이터 업데이트 후
- `hookDeleting()` - 삭제 전
- `hookDeleted()` - 삭제 후

## 주의사항

1. 모듈명과 기능명은 PascalCase로 자동 변환됩니다
2. 데이터베이스 테이블명은 snake_case로 자동 변환됩니다
3. `--force` 옵션 없이는 기존 파일을 덮어쓰지 않습니다
4. 컨트롤러 생성 시 JSON 설정 파일이 자동으로 함께 생성됩니다