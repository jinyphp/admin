# Admin 리소스(View) 생성 가이드

## 📌 개요

@jiny/admin 패키지는 관리자 인터페이스를 위한 표준화된 View 템플릿을 제공합니다. 모든 View는 Blade 템플릿과 Livewire 컴포넌트를 활용하여 동적이고 반응형 UI를 구현합니다.

## 🎨 View 구조

### 기본 View 파일들

각 Admin 모듈은 다음 5개의 기본 View 파일을 가집니다:

1. **table.blade.php** - 목록 페이지의 테이블 뷰
2. **create.blade.php** - 새 항목 생성 폼
3. **edit.blade.php** - 기존 항목 수정 폼
4. **show.blade.php** - 상세 정보 표시
5. **search.blade.php** - 검색 및 필터 폼

### 디렉토리 구조

```
jiny/
└── {module}/
    └── resources/
        └── views/
            └── admin/
                └── admin_{feature}/
                    ├── table.blade.php
                    ├── create.blade.php
                    ├── edit.blade.php
                    ├── show.blade.php
                    └── search.blade.php
```

## 🔨 View 생성 명령어

### 자동 생성 명령

```bash
php artisan admin:make-view {module} {controller} [--force]
```

예시:
```bash
# 새 View 생성
php artisan admin:make-view shop product

# 기존 View 덮어쓰기
php artisan admin:make-view shop product --force
```

생성되는 파일들:
- `/jiny/shop/resources/views/admin/admin_product/table.blade.php`
- `/jiny/shop/resources/views/admin/admin_product/create.blade.php`
- `/jiny/shop/resources/views/admin/admin_product/edit.blade.php`
- `/jiny/shop/resources/views/admin/admin_product/show.blade.php`
- `/jiny/shop/resources/views/admin/admin_product/search.blade.php`

## 📝 각 View 파일 설명

### 1. table.blade.php

목록 페이지에서 데이터를 테이블 형태로 표시합니다.

**주요 기능:**
- 체크박스를 통한 다중 선택
- 정렬 가능한 컬럼 헤더
- 상태 뱃지 표시
- 인라인 액션 버튼 (보기/수정/삭제)

**기본 구조:**
```blade
<div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                {{-- 체크박스 --}}
                <th scope="col" class="px-3 py-2 text-left">
                    <input type="checkbox" wire:model.live="selectedAll">
                </th>
                {{-- 정렬 가능한 컬럼 --}}
                <th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-600 uppercase">
                    <button wire:click="sortBy('name')">Name</button>
                </th>
                {{-- 액션 컬럼 --}}
                <th scope="col" class="relative px-3 py-2">
                    <span class="sr-only">Actions</span>
                </th>
            </tr>
        </thead>
        <tbody>
            @forelse($rows as $item)
                {{-- 데이터 행 --}}
            @empty
                {{-- 빈 상태 메시지 --}}
            @endforelse
        </tbody>
    </table>
</div>
```

### 2. create.blade.php

새 항목을 생성하기 위한 입력 폼입니다.

**주요 기능:**
- 실시간 유효성 검증
- 에러 메시지 표시
- Livewire 바인딩

**기본 구조:**
```blade
<div class="space-y-4">
    {{-- Name 필드 --}}
    <div>
        <label for="name" class="block text-xs font-medium text-gray-700 mb-1">
            Name <span class="text-red-500">*</span>
        </label>
        <input type="text" 
               wire:model="form.name" 
               id="name"
               class="block w-full h-8 px-2.5 text-xs border border-gray-200 rounded">
        @error('form.name')
            <p class="mt-1 text-xs text-red-600">{{ $message }}</p>
        @enderror
    </div>
    
    {{-- 추가 필드들 --}}
</div>
```

### 3. edit.blade.php

기존 항목을 수정하기 위한 폼입니다.

**주요 기능:**
- 기존 데이터 표시
- 메타 정보 표시 (생성일, 수정일)
- create.blade.php와 유사한 구조

**추가 요소:**
```blade
{{-- 메타 정보 표시 --}}
@if(isset($form['created_at']) || isset($form['updated_at']))
<div class="pt-4 border-t border-gray-200">
    <dl class="space-y-2">
        <div class="flex justify-between text-xs">
            <dt class="text-gray-500">Created:</dt>
            <dd class="text-gray-900">{{ $form['created_at'] }}</dd>
        </div>
    </dl>
</div>
@endif
```

### 4. show.blade.php

항목의 상세 정보를 읽기 전용으로 표시합니다.

**⚠️ 중요 주의사항:**
> **액션 버튼(수정, 삭제, 목록)은 show.blade.php에 직접 구현하지 않습니다!**
> 
> 이러한 버튼들은 `admin-show.blade.php` 컴포넌트 레이아웃에서 자동으로 처리됩니다.
> - 위치: `/jiny/admin/resources/views/template/livewire/admin-show.blade.php`
> - show.blade.php는 오직 데이터 표시만 담당합니다
> - 중복된 버튼을 추가하면 UI가 이중으로 표시됩니다

**주요 기능:**
- 정보를 테이블 형태로 표시
- 상태 뱃지
- ~~수정/목록 버튼~~ (컴포넌트 레이아웃에서 처리)

**올바른 구조:**
```blade
<div class="bg-white shadow overflow-hidden sm:rounded-lg">
    {{-- 헤더 --}}
    <div class="px-4 py-5 sm:px-6">
        <h3 class="text-lg leading-6 font-medium text-gray-900">
            Information
        </h3>
    </div>
    
    {{-- 상세 정보 --}}
    <div class="border-t border-gray-200">
        <dl>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3">
                <dt class="text-sm font-medium text-gray-500">Name</dt>
                <dd class="mt-1 text-sm text-gray-900">{{ $data->name }}</dd>
            </div>
        </dl>
    </div>
    
    {{-- 액션 버튼 섹션 제거! 컴포넌트 레이아웃에서 자동 처리 --}}
</div>
```

### 5. search.blade.php

검색 및 필터링 기능을 제공합니다.

**주요 기능:**
- 실시간 검색 (debounce 적용)
- 다양한 필터 옵션
- 필터 초기화 버튼

**기본 구조:**
```blade
<div class="space-y-3">
    {{-- 검색어 입력 --}}
    <div>
        <label for="search">Search</label>
        <input type="text" 
               wire:model.live.debounce.300ms="search"
               placeholder="Search...">
    </div>
    
    {{-- 상태 필터 --}}
    <div>
        <label for="filter_status">Status</label>
        <select wire:model.live="filters.status">
            <option value="">All</option>
            <option value="1">Active</option>
            <option value="0">Inactive</option>
        </select>
    </div>
    
    {{-- 필터 초기화 --}}
    @if($search || !empty(array_filter($filters ?? [])))
    <button wire:click="resetFilters">Clear All Filters</button>
    @endif
</div>
```

## 🎨 스타일링 가이드

### Tailwind CSS 클래스 규칙

모든 View는 Tailwind CSS를 사용하며, 다음 규칙을 따릅니다:

#### 색상 팔레트
- **Primary**: blue-600 (버튼, 링크)
- **Success**: green (성공 상태)
- **Warning**: yellow (경고 상태)
- **Danger**: red (삭제, 오류)
- **Neutral**: gray (기본 텍스트, 테두리)

#### 간격 규칙
- **패딩**: px-3 py-2 (테이블 셀)
- **마진**: space-y-4 (폼 필드 간격)
- **테두리**: border-gray-200

#### 폰트 크기
- **기본 텍스트**: text-xs
- **레이블**: text-xs font-medium
- **헤더**: text-sm font-medium

## 💡 커스터마이징 가이드

### 테이블 컬럼 추가

```blade
{{-- table.blade.php에 새 컬럼 추가 --}}
<th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-600 uppercase">
    <button wire:click="sortBy('new_column')">
        New Column
        @if($sortField === 'new_column')
            {{-- 정렬 아이콘 --}}
        @endif
    </button>
</th>
```

### 폼 필드 추가

```blade
{{-- create/edit.blade.php에 새 필드 추가 --}}
<div>
    <label for="new_field" class="block text-xs font-medium text-gray-700 mb-1">
        New Field
    </label>
    <input type="text" 
           wire:model="form.new_field" 
           id="new_field"
           class="block w-full h-8 px-2.5 text-xs border border-gray-200 rounded">
    @error('form.new_field')
        <p class="mt-1 text-xs text-red-600">{{ $message }}</p>
    @enderror
</div>
```

### 상태 뱃지 커스터마이징

```blade
{{-- 커스텀 상태 뱃지 --}}
@switch($item->status)
    @case('active')
        <span class="px-1.5 inline-flex text-xs leading-4 font-medium rounded-full bg-green-100 text-green-800">
            Active
        </span>
        @break
    @case('pending')
        <span class="px-1.5 inline-flex text-xs leading-4 font-medium rounded-full bg-yellow-100 text-yellow-800">
            Pending
        </span>
        @break
    @default
        <span class="px-1.5 inline-flex text-xs leading-4 font-medium rounded-full bg-gray-100 text-gray-600">
            Inactive
        </span>
@endswitch
```

## 🔗 Livewire 통합

### Wire 디렉티브

View는 Livewire와 통합되어 실시간 상호작용을 제공합니다:

- `wire:model` - 양방향 데이터 바인딩
- `wire:click` - 클릭 이벤트 처리
- `wire:model.live` - 실시간 업데이트
- `wire:model.live.debounce.300ms` - 디바운스 적용

### 예시

```blade
{{-- 실시간 검색 --}}
<input wire:model.live.debounce.300ms="search">

{{-- 정렬 --}}
<button wire:click="sortBy('name')">Sort by Name</button>

{{-- 삭제 확인 --}}
<button wire:click="requestDeleteSingle({{ $item->id }})">Delete</button>
```

## ✅ 체크리스트

새 View 생성 후:
- [ ] 테이블 컬럼을 실제 데이터에 맞게 수정
- [ ] 폼 필드를 요구사항에 맞게 추가/수정
- [ ] 검증 규칙에 맞는 에러 메시지 표시
- [ ] 상태 뱃지 및 포맷팅 적용
- [ ] 라우트 이름 확인 및 수정
- [ ] 접근성(a11y) 속성 추가
- [ ] 반응형 디자인 테스트

## 🚀 실제 사용 예시

### 완전한 Admin 모듈 생성

```bash
# 1. 컨트롤러 생성
php artisan admin:make-controller shop product

# 2. JSON 설정 파일 생성
php artisan admin:make-json shop product

# 3. View 파일 생성
php artisan admin:make-view shop product

# 4. View 파일 커스터마이징
# - table.blade.php: 제품 관련 컬럼 추가 (price, stock, category 등)
# - create/edit.blade.php: 제품 필드 추가
# - search.blade.php: 카테고리 필터 추가

# 5. 라우트 등록
php artisan admin:route-add shop product

# 6. 테스트
# http://localhost:8000/admin/product
```

## 🔒 보안 고려사항

1. **XSS 방지**: Blade의 `{{ }}` 구문 사용 (자동 이스케이핑)
2. **CSRF 보호**: 모든 폼에 `@csrf` 토큰 포함
3. **입력 검증**: 클라이언트/서버 양쪽 검증
4. **권한 체크**: 각 액션에 대한 권한 확인

## 📚 참고 자료

- [Laravel Blade 문서](https://laravel.com/docs/blade)
- [Livewire 문서](https://livewire.laravel.com)
- [Tailwind CSS 문서](https://tailwindcss.com/docs)